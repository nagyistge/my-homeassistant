morningbriefing_simon:
  alias: Play Simon's Briefing
  sequence:
    - service: tts.google_say
      data_template:
        cache: false
        entity_id: media_player.mac_mini_speaker # For now
        message: >
          {% if now().strftime("%H")|int < 12 %}
          Good morning, Simon.
          {% elif now().strftime("%H")|int < 18 %}
          Good afternoon.
          {% else %}
          Good evening.
          {% endif %}
          It's currently {{ states('sensor.dark_sky_temperature')|int }} degrees,
          {% if now().strftime("%H")|int < 16 %}
          with a predicted high of {{ states('sensor.dark_sky_daily_high_temperature')|int }}.
          {% endif %}
          Tonight it will be {{ states('sensor.dark_sky_daily_low_temperature')|int }}.
          In the next 24 hours it will be {{ states('sensor.dark_sky_hourly_summary') }}.
          {% if is_state('calendar.garbage_collection', 'on') %}
          Remember, you need to put out the {{ states('sensor.garbage_type') }} bins.
          {% endif %}
          {% if states('device_tracker.simonsipad.attributes.battery') | float < 10 %}
          You should also charge your iPad today. It's currently sitting at {{ states('sensor.simon_ipadbattery') | int }} percent.
          {% endif %}
